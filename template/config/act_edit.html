{% extends "../base.html" %}

{% block page_title %}{{ title }}{% end %}

{% block content %}
<div class="container-fluid">
    <div class="col-md-8 col-md-offset-2">

        <form class="form-horizontal mt24" action="/activity/edit" method="post">
            {% if succ %}
                <div class="alert alert-success alert-dimissable">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                    恭喜小伙伴，修改参数成功！
                </div>
            {% end %}

            {% if errors %}
                <div class="alert alert-danger alert-dimissable">
                    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                    <ul>
                        {% for error in errors %}
                            <li>{{ error }}</li>
                        {% end %}
                    </ul>
                </div>
            {% end %}
            <input type="hidden" name="id" value="{{ option['id'] }}" />

            <div class="form-group">
                <label class="col-md-2 control-label" for="ad_description">键key：</label>
                <div class="col-md-3">
                    <input type="text" class="form-control" value="{{ option['key'] }}" name="key" readonly="readonly"/>
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label" for="ad_title">值values：</label>
                <div class="col-md-2">
                    <input type="number" class="form-control" value="{{ option['values'] }}" name="values" placeholder="请输入参数值" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label" for="ad_intro">说明：</label>
                <div class="col-md-8">
                    <input type="text" class="form-control" value="{{ option['description'] }}" name="description" placeholder="请输入说明文字" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label" for="ad_time">开始时间：</label>
                <div class="col-md-3">
                	<input type="date" class="form-control" id="date_s" name="sdate" value="{{option['start_time'].strftime('%Y-%m-%d')}}" />
                </div>
                <div class="col-md-3">
                	<input type="text" class="form-control" id="time_s" name="stime" value="{{option['start_time'].strftime('%H:%M:%S')}}" onblur="display(this)" />
                </div>
            </div>
            <div class="form-group">
                <label class="col-md-2 control-label" for="ad_time">结束时间：</label>
                <div class="col-md-3">
                	<input type="date" class="form-control" id="date_e" name="edate" value="{{option['end_time'].strftime('%Y-%m-%d')}}" />
                </div>
                <div class="col-md-3">
                	<input type="text" class="form-control" id="time_s" name="etime" value="{{option['end_time'].strftime('%H:%M:%S')}}" onblur="display(this)" />
                </div>
            </div>
            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    <button type="submit" class="btn btn-info">确认修改</button>
                </div>
            </div>
        </form>
    </div>
</div>
{% end %}

{% block javascript %}
<script>

function display(obj){
	var time = $(obj).val();
	var pattern = /^([0-1]{1}\d|2[0-3]):([0-5]\d):([0-5]\d)$/;
	var b = pattern.test(time);
	if(b == false){
		alert("请输入正确的时间");
		$(obj).focus();
	}
}
</script>
{% end %}
